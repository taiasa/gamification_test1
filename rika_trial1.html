<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç†ç§‘ãƒ¢ãƒ³ãƒ»ã‚¯ã‚¨ã‚¹ãƒˆ - å°å­¦æ ¡ç†ç§‘å­¦ç¿’ã‚²ãƒ¼ãƒ </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DotGothic16&family=Kiwi+Maru:wght@400;500&display=swap');

        :root {
            --primary: #4ade80;
            --secondary: #3b82f6;
            --accent: #facc15;
            --danger: #ef4444;
        }

        body {
            font-family: 'Kiwi Maru', serif;
            background-color: #f0fdf4;
            overflow-x: hidden;
        }

        .pixel-font {
            font-family: 'DotGothic16', sans-serif;
        }

        .game-card {
            box-shadow: 0 8px 0 #059669;
            transition: all 0.1s;
        }

        .game-card:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #059669;
        }

        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .health-bar-inner {
            transition: width 0.5s ease-out;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="game-container" class="w-full max-w-2xl bg-white border-8 border-green-600 rounded-3xl p-6 shadow-2xl relative overflow-hidden">
        
        <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
        <div id="screen-start" class="text-center py-6">
            <h1 class="text-5xl md:text-6xl font-bold text-green-700 mb-4 pixel-font">ç†ç§‘ãƒ¢ãƒ³<br>ã‚¯ã‚¨ã‚¹ãƒˆ</h1>
            <p class="text-lg text-gray-600 mb-8 font-bold">å­¦ã³ãŸã„åˆ†é‡ï¼ˆã¶ã‚“ã‚„ï¼‰ã‚’ãˆã‚‰ã¼ã†ï¼</p>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 max-w-lg mx-auto">
                <button onclick="startGame('insects')" class="game-card py-3 bg-green-500 text-white rounded-2xl text-lg font-bold hover:bg-green-400">
                    ğŸ¾ ã“ã‚“è™«ãƒ»å‹•ç‰©
                </button>
                <button onclick="startGame('plants')" class="game-card py-3 bg-emerald-500 text-white rounded-2xl text-lg font-bold hover:bg-emerald-400">
                    ğŸŒ» æ¤ç‰©ï¼ˆã—ã‚‡ãã¶ã¤ï¼‰
                </button>
                <button onclick="startGame('electricity')" class="game-card py-3 bg-yellow-500 text-white rounded-2xl text-lg font-bold hover:bg-yellow-400">
                    âš¡ é›»æ°—ãƒ»ç£çŸ³
                </button>
                <button onclick="startGame('stars')" class="game-card py-3 bg-indigo-600 text-white rounded-2xl text-lg font-bold hover:bg-indigo-500">
                    ğŸŒ™ æ˜Ÿã¨æœˆ
                </button>
                <button onclick="startGame('lever')" class="game-card py-3 bg-orange-500 text-white rounded-2xl text-lg font-bold hover:bg-orange-400">
                    âš–ï¸ ã¦ã“ãƒ»ãŠã‚‚ã‚Š
                </button>
                <button onclick="startGame('liquid')" class="game-card py-3 bg-cyan-500 text-white rounded-2xl text-lg font-bold hover:bg-cyan-400">
                    ğŸ§ª æ°´æº¶æ¶²ï¼ˆã™ã„ã‚ˆã†ãˆãï¼‰
                </button>
            </div>
        </div>

        <!-- ãƒãƒˆãƒ«ç”»é¢ -->
        <div id="screen-battle" class="hidden">
            <div class="flex justify-between items-center mb-8">
                <div class="w-1/2 pr-2">
                    <div class="flex justify-between mb-1">
                        <span class="font-bold text-green-700">ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼</span>
                        <span id="player-hp-text" class="text-sm">100/100</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden border-2 border-gray-300">
                        <div id="player-hp-bar" class="health-bar-inner h-full bg-green-500" style="width: 100%"></div>
                    </div>
                </div>
                <div class="w-1/2 pl-2 text-right">
                    <div class="flex justify-between mb-1">
                        <span id="monster-hp-text" class="text-sm ml-auto">100/100</span>
                        <span id="monster-name" class="font-bold text-red-600">ç†ç§‘ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden border-2 border-gray-300">
                        <div id="monster-hp-bar" class="health-bar-inner h-full bg-red-500" style="width: 100%"></div>
                    </div>
                </div>
            </div>

            <div class="flex justify-center mb-10 relative h-40">
                <div id="monster-sprite" class="text-8xl floating">ğŸ‘¾</div>
                <div id="effect-layer" class="absolute inset-0 flex items-center justify-center pointer-events-none text-4xl"></div>
            </div>

            <div id="question-box" class="bg-gray-100 p-6 rounded-2xl border-4 border-gray-300 mb-6">
                <p id="question-text" class="text-xl font-bold text-gray-800 leading-relaxed"></p>
            </div>

            <div id="choice-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Choices will be injected here -->
            </div>
        </div>

        <!-- çµæœç”»é¢ -->
        <div id="screen-result" class="hidden text-center py-10">
            <h2 id="result-title" class="text-4xl font-bold mb-4 pixel-font text-green-600">å†’é™ºãŠã‚ã‚Šï¼</h2>
            <div id="result-icon" class="text-8xl mb-6">ğŸ†</div>
            <p id="result-message" class="text-xl mb-10 font-bold"></p>
            <button onclick="location.reload()" class="game-card px-10 py-4 bg-blue-500 text-white rounded-2xl text-xl font-bold hover:bg-blue-400">
                ã‚¿ã‚¤ãƒˆãƒ«ã¸ã‚‚ã©ã‚‹
            </button>
        </div>

        <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒˆãƒ¼ã‚¹ãƒˆ -->
        <div id="toast" class="absolute top-4 left-1/2 -translate-x-1/2 bg-black/80 text-white px-6 py-3 rounded-full text-lg font-bold opacity-0 transition-opacity pointer-events-none z-50">
            ã›ã„ã‹ã„ï¼
        </div>

    </div>

    <script>
        const quizData = {
            insects: [
                { q: "æ˜†è™«ï¼ˆã“ã‚“ã¡ã‚…ã†ï¼‰ã®è¶³ã¯å…¨éƒ¨ã§ä½•æœ¬ï¼Ÿ", a: ["4æœ¬", "6æœ¬", "8æœ¬", "10æœ¬"], correct: 1 },
                { q: "æ˜†è™«ã®ã‹ã‚‰ã ã¯ã€Œé ­ã€ã€Œèƒ¸ã€ã¨ã‚‚ã†ä¸€ã¤ã¯ä½•ï¼Ÿ", a: ["è¶³", "ã¯ã­", "è…¹ï¼ˆã¯ã‚‰ï¼‰", "é¦–"], correct: 2 },
                { q: "å®Œå…¨å¤‰æ…‹ï¼ˆã‹ã‚“ãœã‚“ã¸ã‚“ãŸã„ï¼‰ã‚’ã™ã‚‹æ˜†è™«ã¯ã©ã‚Œï¼Ÿ", a: ["ãƒãƒƒã‚¿", "ã‚«ãƒã‚­ãƒª", "ã‚«ãƒ–ãƒˆãƒ ã‚·", "ãƒˆãƒ³ãƒœ"], correct: 2 },
                { q: "ãƒ¢ãƒ³ã‚·ãƒ­ãƒãƒ§ã‚¦ãŒåµã‚’ç”£ã¿ã¤ã‘ã‚‹ã®ã¯ã©ã®æ¤ç‰©ï¼Ÿ", a: ["ã²ã¾ã‚ã‚Š", "ã‚­ãƒ£ãƒ™ãƒ„", "ãƒ›ã‚¦ã‚»ãƒ³ã‚«", "ã‚¢ã‚µã‚¬ã‚ª"], correct: 1 },
                { q: "æ˜†è™«ã®è¶³ãŒã¤ã„ã¦ã„ã‚‹ã®ã¯ã‹ã‚‰ã ã®ã©ã“ï¼Ÿ", a: ["é ­", "èƒ¸", "è…¹", "å…¨éƒ¨"], correct: 1 }
            ],
            plants: [
                { q: "æ¤ç‰©ãŒç¨®ã‹ã‚‰èŠ½ã‚’å‡ºã™ã“ã¨ã‚’ä½•ã¨ã„ã†ï¼Ÿ", a: ["ç™ºèŠ½ï¼ˆã¯ã¤ãŒï¼‰", "é–‹èŠ±", "å—ç²‰", "å…‰åˆæˆ"], correct: 0 },
                { q: "æ¤ç‰©ãŒè‚²ã¤ã®ã«ã€æ—¥å…‰ã¨ã‚ã¨ä½•ãŒå¿…è¦ï¼Ÿ", a: ["ç ‚ç³–", "è‚¥æ–™", "åœŸ", "æ°´ã¨é©å½“ãªæ¸©åº¦"], correct: 3 },
                { q: "ã‚¢ã‚µã‚¬ã‚ªã®èŠ±ãŒã—ã¼ã‚“ã å¾Œã«ã§ãã‚‹ã®ã¯ä½•ï¼Ÿ", a: ["æ ¹", "ç¨®ï¼ˆãŸã­ï¼‰", "è‘‰", "ãã"], correct: 1 },
                { q: "æ—¥å…‰ã«å½“ãŸã‚‹ã¨è‘‰ã§ä½œã‚‰ã‚Œã‚‹æ „é¤Šåˆ†ã¯ä½•ï¼Ÿ", a: ["å¡©", "ã§ã‚“ã·ã‚“", "ã‚¿ãƒ³ãƒ‘ã‚¯è³ª", "ãƒ“ã‚¿ãƒŸãƒ³"], correct: 1 },
                { q: "ã²ã¾ã‚ã‚Šã®èŠ±ã¯ã©ã£ã¡ã®æ–¹å‘ã‚’å‘ãã“ã¨ãŒå¤šã„ï¼Ÿ", a: ["åŒ—", "å—", "å¤ªé™½ã®æ–¹å‘", "åœ°é¢"], correct: 2 }
            ],
            electricity: [
                { q: "é›»æ°—ã‚’é€šã™ã‚‚ã®ã¯ã©ã‚Œï¼Ÿ", a: ["ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯", "ã‚ã‚Šã°ã—", "10å††ç‰ï¼ˆéŠ…ï¼‰", "æ¶ˆã—ã‚´ãƒ "], correct: 2 },
                { q: "ä¹¾é›»æ± ã‚’ï¼’ã¤ã€Œç›´åˆ—ï¼ˆã¡ã‚‡ãã‚Œã¤ï¼‰ã€ã«ã¤ãªãã¨ã€è±†é›»çƒã®æ˜ã‚‹ã•ã¯ï¼Ÿ", a: ["æš—ããªã‚‹", "æ˜ã‚‹ããªã‚‹", "å¤‰ã‚ã‚‰ãªã„", "æ¶ˆãˆã‚‹"], correct: 1 },
                { q: "æ–¹ä½ç£çŸ³ã®Næ¥µãŒæŒ‡ã™æ–¹å‘ã¯ã©ã£ã¡ï¼Ÿ", a: ["æ±", "è¥¿", "å—", "åŒ—"], correct: 3 },
                { q: "å›è·¯ï¼ˆã‹ã„ã‚ï¼‰ã«é›»æ°—ãŒæµã‚Œã‚‹ã¨ãã€é›»æ± ã®ã©ã“ã‹ã‚‰ã©ã“ã¸æµã‚Œã‚‹ï¼Ÿ", a: ["ï¼‹ã‹ã‚‰ãƒ¼", "ãƒ¼ã‹ã‚‰ï¼‹", "æ¨ªã‹ã‚‰", "æ±ºã¾ã£ã¦ã„ãªã„"], correct: 0 },
                { q: "ç£çŸ³ã®åŒã˜æ¥µï¼ˆNã¨Nãªã©ï¼‰ã‚’è¿‘ã¥ã‘ã‚‹ã¨ã©ã†ãªã‚‹ï¼Ÿ", a: ["ãã£ã¤ã", "ã—ã‚Šãã‘åˆã†", "ä½•ã‚‚èµ·ããªã„", "ç†±ããªã‚‹"], correct: 1 }
            ],
            stars: [
                { q: "æœˆã¯ã©ã¡ã‚‰ã®æ–¹å‘ã‹ã‚‰æ˜‡ï¼ˆã®ã¼ï¼‰ã‚‹ï¼Ÿ", a: ["åŒ—", "å—", "æ±", "è¥¿"], correct: 2 },
                { q: "å¤ªé™½ã®å…‰ã‚’ã¯ã­è¿”ã—ã¦å…‰ã£ã¦ã„ã‚‹å¤©ä½“ã¯ã©ã‚Œï¼Ÿ", a: ["å¤ªé™½", "æœˆ", "åŒ—æ¥µæ˜Ÿ", "ä¸€ç­‰æ˜Ÿ"], correct: 1 },
                { q: "å†¬ã®å¤œç©ºã«è¦‹ãˆã‚‹ã€ç ‚æ™‚è¨ˆã®ã‚ˆã†ãªå½¢ã‚’ã—ãŸæ˜Ÿåº§ã¯ä½•ï¼Ÿ", a: ["å¤ã®å¤§ä¸‰è§’", "ã‚ªãƒªã‚ªãƒ³åº§", "ã‚«ã‚·ã‚ªãƒšãƒ¤åº§", "ã•ãã‚Šåº§"], correct: 1 },
                { q: "æœˆãŒå¤ªé™½ã¨é‡ãªã£ã¦ã€å¤ªé™½ãŒæ¬ ã‘ã¦è¦‹ãˆã‚‹ç¾è±¡ã‚’ä½•ã¨ã„ã†ï¼Ÿ", a: ["æœˆé£Ÿ", "æ—¥é£Ÿ", "æº€æœˆ", "ä¸‰æ—¥æœˆ"], correct: 1 },
                { q: "åŒ—æ¥µæ˜Ÿï¼ˆã»ã£ãã‚‡ãã›ã„ï¼‰ã‚’æ¢ã™ã¨ãã«ä½¿ã‚ã‚Œã‚‹æ˜Ÿåº§ã¯ï¼Ÿ", a: ["ã‚ªãƒªã‚ªãƒ³åº§", "ã‚«ã‚·ã‚ªãƒšãƒ¤åº§", "ã¦ã‚“ã³ã‚“åº§", "ã—ã—åº§"], correct: 1 }
            ],
            lever: [
                { q: "ã¦ã“ã‚’æ”¯ï¼ˆã•ã•ï¼‰ãˆã¦ã„ã‚‹å ´æ‰€ã‚’ä½•ã¨ã„ã†ï¼Ÿ", a: ["åŠ›ç‚¹", "ä½œç”¨ç‚¹", "æ”¯ç‚¹", "çµ‚ç‚¹"], correct: 2 },
                { q: "ã¦ã“ã§åŠ›ã‚’åŠ ãˆã‚‹å ´æ‰€ã‚’ä½•ã¨ã„ã†ï¼Ÿ", a: ["æ”¯ç‚¹", "åŠ›ç‚¹", "ä½œç”¨ç‚¹", "å§‹ç‚¹"], correct: 1 },
                { q: "é‡ã„ã‚‚ã®ã‚’æ¥½ã«æŒã¡ä¸Šã’ã‚‹ã«ã¯ã€æ”¯ç‚¹ã‹ã‚‰åŠ›ç‚¹ã‚’ã©ã†ã™ã‚Œã°ã„ã„ï¼Ÿ", a: ["è¿‘ãã™ã‚‹", "é ãã™ã‚‹", "çœŸä¸Šã«ã™ã‚‹", "å‹•ã‹ã•ãªã„"], correct: 1 },
                { q: "ä¸Šçš¿ï¼ˆã†ã‚ã–ã‚‰ï¼‰å¤©ç§¤ï¼ˆã¦ã‚“ã³ã‚“ï¼‰ãŒé‡£ã‚Šåˆã£ã¦ã„ã‚‹ã¨ãã€å·¦å³ã®é‡ã•ã¯ï¼Ÿ", a: ["å³ãŒé‡ã„", "å·¦ãŒé‡ã„", "åŒã˜", "é–¢ä¿‚ãªã„"], correct: 2 },
                { q: "ã¦ã“ã®åŸç†ã‚’åˆ©ç”¨ã—ãŸé“å…·ã¯ã©ã‚Œï¼Ÿ", a: ["ãˆã‚“ã´ã¤", "ã¯ã•ã¿", "å®šè¦", "æ¶ˆã—ã‚´ãƒ "], correct: 1 }
            ],
            liquid: [
                { q: "é…¸æ€§ï¼ˆã•ã‚“ã›ã„ï¼‰ã®æ¶²ä½“ã«é’è‰²ãƒªãƒˆãƒã‚¹ç´™ã‚’ã¤ã‘ã‚‹ã¨ä½•è‰²ã«ãªã‚‹ï¼Ÿ", a: ["é’è‰²ã®ã¾ã¾", "èµ¤è‰²", "é»„è‰²", "ç·‘è‰²"], correct: 1 },
                { q: "äºŒé…¸åŒ–ç‚­ç´ ã‚’çŸ³ç°æ°´ã«é€šã™ã¨ã€çŸ³ç°æ°´ã¯ã©ã†ãªã‚‹ï¼Ÿ", a: ["èµ¤ããªã‚‹", "é€æ˜ã«ãªã‚‹", "ç™½ãã«ã”ã‚‹", "ã‚ã‚ãŒå‡ºã‚‹"], correct: 2 },
                { q: "é‰„ã‚’æº¶ï¼ˆã¨ï¼‰ã‹ã™åŠ›ãŒã‚ã‚‹æ°´æº¶æ¶²ã¯ã©ã‚Œï¼Ÿ", a: ["é£Ÿå¡©æ°´", "ç ‚ç³–æ°´", "å¡©é…¸ï¼ˆãˆã‚“ã•ã‚“ï¼‰", "é‡æ›¹æ°´"], correct: 2 },
                { q: "æ°´ã«æº¶ã‘ã¦ã„ã‚‹ç‰©è³ªï¼ˆç ‚ç³–ãªã©ï¼‰ã‚’ä½•ã¨ã„ã†ï¼Ÿ", a: ["æº¶åª’", "æº¶è³ªï¼ˆã‚ˆã†ã—ã¤ï¼‰", "æº¶æ¶²", "æº¶ã‘æ®‹ã‚Š"], correct: 1 },
                { q: "ã‚¢ãƒ³ãƒ¢ãƒ‹ã‚¢æ°´ã¯ã©ã®ã‚ˆã†ãªæ€§è³ªã‚’æŒã£ã¦ã„ã‚‹ï¼Ÿ", a: ["é…¸æ€§", "ä¸­æ€§", "ã‚¢ãƒ«ã‚«ãƒªæ€§", "æ²¹æ€§"], correct: 2 }
            ]
        };

        const monsters = ["ğŸ‘¾", "ğŸ‰", "ğŸ‘¹", "ğŸ‘½", "ğŸ¤–", "ğŸ‘»", "ğŸ§Ÿ", "ğŸ™"];
        
        let currentState = {
            category: '',
            questions: [],
            currentIdx: 0,
            playerHP: 100,
            monsterHP: 100,
            maxQuestions: 5
        };

        function showScreen(id) {
            document.querySelectorAll('#game-container > div').forEach(div => {
                if(div.id !== 'toast') div.classList.add('hidden');
            });
            document.getElementById(id).classList.remove('hidden');
        }

        function startGame(category) {
            currentState.category = category;
            currentState.questions = [...quizData[category]].sort(() => Math.random() - 0.5);
            currentState.currentIdx = 0;
            currentState.playerHP = 100;
            currentState.monsterHP = 100;
            
            // Set random monster based on category or random
            document.getElementById('monster-sprite').textContent = monsters[Math.floor(Math.random() * monsters.length)];
            
            updateUI();
            loadQuestion();
            showScreen('screen-battle');
        }

        function updateUI() {
            document.getElementById('player-hp-bar').style.width = currentState.playerHP + '%';
            document.getElementById('player-hp-text').textContent = currentState.playerHP + '/100';
            
            document.getElementById('monster-hp-bar').style.width = currentState.monsterHP + '%';
            document.getElementById('monster-hp-text').textContent = currentState.monsterHP + '/100';
            
            // Color feedback for health
            if(currentState.playerHP < 30) document.getElementById('player-hp-bar').classList.replace('bg-green-500', 'bg-red-500');
            else document.getElementById('player-hp-bar').classList.replace('bg-red-500', 'bg-green-500');
        }

        function loadQuestion() {
            const q = currentState.questions[currentState.currentIdx];
            document.getElementById('question-text').textContent = `ç¬¬ ${currentState.currentIdx + 1} å•: ${q.q}`;
            
            const container = document.getElementById('choice-container');
            container.innerHTML = '';
            
            q.a.forEach((choice, idx) => {
                const btn = document.createElement('button');
                btn.className = "game-card p-4 bg-white border-4 border-gray-200 rounded-xl text-lg font-bold hover:border-blue-400 text-gray-700 text-left transition-colors duration-200";
                btn.textContent = choice;
                btn.onclick = () => handleAnswer(idx);
                container.appendChild(btn);
            });
        }

        function handleAnswer(choiceIdx) {
            const q = currentState.questions[currentState.currentIdx];
            const isCorrect = choiceIdx === q.correct;
            const effectLayer = document.getElementById('effect-layer');
            const monsterSprite = document.getElementById('monster-sprite');
            
            // Disable all buttons during effect
            const buttons = document.querySelectorAll('#choice-container button');
            buttons.forEach(b => b.disabled = true);

            if (isCorrect) {
                // Correct: Damage Monster
                showToast("ã›ã„ã‹ã„ï¼ âœ¨", "bg-green-600");
                currentState.monsterHP -= 20;
                effectLayer.textContent = "ğŸ’¥";
                monsterSprite.classList.add('shake');
                setTimeout(() => {
                    monsterSprite.classList.remove('shake');
                    effectLayer.textContent = "";
                }, 500);
            } else {
                // Incorrect: Damage Player
                showToast("ã–ã‚“ã­ã‚“... ğŸ’¦ æ­£è§£ã¯ã€Œ" + q.a[q.correct] + "ã€", "bg-red-600");
                currentState.playerHP -= 25;
                document.getElementById('game-container').classList.add('shake');
                effectLayer.textContent = "âš¡";
                setTimeout(() => {
                    document.getElementById('game-container').classList.remove('shake');
                    effectLayer.textContent = "";
                }, 500);
            }

            updateUI();
            
            setTimeout(() => {
                if (currentState.playerHP <= 0) {
                    endGame(false);
                } else if (currentState.monsterHP <= 0 || currentState.currentIdx >= currentState.maxQuestions - 1) {
                    endGame(true);
                } else {
                    currentState.currentIdx++;
                    loadQuestion();
                }
            }, 1200);
        }

        function showToast(text, colorClass) {
            const toast = document.getElementById('toast');
            toast.textContent = text;
            toast.className = `absolute top-4 left-1/2 -translate-x-1/2 text-white px-6 py-3 rounded-full text-lg font-bold transition-opacity pointer-events-none z-50 shadow-lg ${colorClass}`;
            toast.style.opacity = "1";
            setTimeout(() => toast.style.opacity = "0", 1800);
        }

        function endGame(isWin) {
            showScreen('screen-result');
            const title = document.getElementById('result-title');
            const icon = document.getElementById('result-icon');
            const msg = document.getElementById('result-message');
            
            if (isWin && currentState.monsterHP <= 0) {
                title.textContent = "å®Œå…¨å‹åˆ©ï¼";
                title.className = "text-4xl font-bold mb-4 pixel-font text-yellow-500";
                icon.textContent = "ğŸ‘‘";
                msg.textContent = "ãã¿ã¯ç†ç§‘ï¼ˆã‚Šã‹ï¼‰ãƒã‚¹ã‚¿ãƒ¼ã ï¼ã™ã¹ã¦ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’ãŸãŠã—ãŸãï¼";
            } else if (isWin) {
                title.textContent = "ã¼ã†ã‘ã‚“ã‚¯ãƒªã‚¢ï¼";
                title.className = "text-4xl font-bold mb-4 pixel-font text-green-600";
                icon.textContent = "ğŸ‰";
                msg.textContent = `${currentState.currentIdx + 1}å•ä¸­ã€ãŸãã•ã‚“ã®å•é¡Œã«æ­£è§£ã—ãŸã­ï¼ã‚‚ã£ã¨å‹‰å¼·ã—ã¦å®Œå…¨å‹åˆ©ã‚’ã‚ã–ãã†ã€‚`;
            } else {
                title.textContent = "ã—ã£ã±ã„...";
                title.className = "text-4xl font-bold mb-4 pixel-font text-gray-500";
                icon.textContent = "ğŸ‘»";
                msg.textContent = "ä½“åŠ›ãŒãªããªã£ã¦ã—ã¾ã£ãŸ...ã€‚ã‚‚ã†ã„ã¡ã©ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦å¾©ç¿’ã—ã‚ˆã†ï¼";
            }
        }
    </script>
</body>
</html>